<%- model_class = Watcher -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>
<table class="table table-striped">
  <thead>
    <tr> <th>Code:</th>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th>Name</th>
 
      <th>House</th>

      <th><%= model_class.human_attribute_name(:powerhead) %></th>
      <th><%= model_class.human_attribute_name(:main_pump) %></th>
      <th><%= model_class.human_attribute_name(:heater) %></th>
<th>ATO Pump</th>
<th>Water Level</th>
      <th>Received</th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    
  	<% @watchers.each do |watcher| %>
      <tr>
     	<td><% for update_code in watcher.update_codes %>
				<% if watcher.updated_reason == update_code.reef_tank_id %>
						   <%= update_code.message %>

							<%end%>

		  <% end %>
	
	</td>
        <td><%= link_to watcher.id, watcher_path(watcher) %></td>
       
        <td><%= number_with_precision(watcher.temp, :precision => 1)   %>°f</td>
       <td><%= number_with_precision(watcher.ambeint_temp, :precision => 1)   %>°f</td>
	
        <td>	
		 <% if watcher.powerhead  == true %>
				   
			 <span class="label label-success">ON</span>
					<%else%>	
					<span class="label label-warning">OFF</span>
					<%end%>
		</td></td>
		<td>

		 <% if watcher.main_pump  == true %>
		   	 <span class="label label-success">ON</span>
				<%else%>	
				<span class="label label-warning">OFF</span>
			<%end%>
</td>
	<td>

	 <% if watcher.heater  == true %>
		 <span class="label label-success">ON</span>
			<%else%>	
			<span class="label label-warning">OFF</span>
		<%end%>
</td>

	<td>

	 <% if watcher.ato_pump  == true %>
		 <span class="label label-success">ON</span>
			<%else%>	
			<span class="label label-warning">OFF</span>
		<%end%>
</td>

 <td><% if watcher.waterlevelokay == false %>
		    <span class="label label-success">Okay</span>
			<%else%>	
			<span class="label label-warning">Water Level low</span>
			<%end%>

			</td>
    
		     <td> <%= time_ago_in_words(watcher.created_at) %> ago </td>
		        

        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_watcher_path(watcher), :class => 'btn btn-mini' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      watcher_path(watcher),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
 <%= will_paginate %>

			<%= debug @arduinos  if Rails.env.development?%>
			<%= debug(params) if Rails.env.development? %>
